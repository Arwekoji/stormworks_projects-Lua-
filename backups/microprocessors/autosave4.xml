<?xml version="1.0" encoding="UTF-8"?>
<microprocessor name="CTRL (MCC Telemetry)" width="4" length="6" id_counter="348" id_counter_node="30" sym0="49539" sym1="32769" sym2="8184" sym3="448" sym4="448" sym6="992" sym7="33809" sym8="35273" sym9="4644" sym10="9362" sym11="10570" sym13="128" sym14="32769" sym15="49539">
	<nodes>
		<n id="1" component_id="8">
			<node label="Out (Control Panel)" type="5">
				<position x="2" z="5"/>
			</node>
		</n>
		<n id="2" component_id="9">
			<node label="In (Control Panel)" mode="1" type="5">
				<position z="1"/>
			</node>
		</n>
		<n id="3" component_id="7">
			<node label="In (RX from target)" mode="1" type="5"/>
		</n>
		<n id="4" component_id="29">
			<node label="In (RX Listening)" mode="1" type="5">
				<position z="2"/>
			</node>
		</n>
		<n id="6" component_id="52">
			<node label="In (RX Distress)" mode="1" type="5" description="Always 13">
				<position z="3"/>
			</node>
		</n>
		<n id="7" component_id="60">
			<node label="In (Physic Module)" mode="1" type="5" description="XHY">
				<position z="4"/>
			</node>
		</n>
		<n id="8" component_id="61">
			<node label="In (Radar)" mode="1" type="5">
				<position z="5"/>
			</node>
		</n>
		<n id="9" component_id="92">
			<node label="In (Seat)" mode="1" type="5">
				<position x="1" z="5"/>
			</node>
		</n>
		<n id="10" component_id="50">
			<node label="In (RX Listening min)" mode="1" type="1" description="Listening Diapason">
				<position x="2" z="1"/>
			</node>
		</n>
		<n id="11" component_id="93">
			<node label="In (RX Listening max)" mode="1" type="1" description="Listening Diapason">
				<position x="2"/>
			</node>
		</n>
		<n id="12" component_id="94">
			<node label="In (Max Blocked Channel)" mode="1" type="1">
				<position x="2" z="2"/>
			</node>
		</n>
		<n id="13" component_id="95">
			<node label="In (Set Radiochannel)" mode="1" type="1">
				<position x="2" z="3"/>
			</node>
		</n>
		<n id="15" component_id="336">
			<node label="In (Set Mission Number)" mode="1" type="1">
				<position x="2" z="4"/>
			</node>
		</n>
		<n id="17" component_id="106">
			<node label="Out (Listening OmniRX)" type="1">
				<position x="3" z="4"/>
			</node>
		</n>
		<n id="18" component_id="107">
			<node label="Out (Radiochannel)" type="1" description="Modified">
				<position x="3" z="5"/>
			</node>
		</n>
		<n id="19" component_id="77">
			<node label="Out (RX Pitch)" type="1">
				<position x="3" z="3"/>
			</node>
		</n>
		<n id="20" component_id="76">
			<node label="Out (RX Pitch base)" type="1">
				<position x="3" z="2"/>
			</node>
		</n>
		<n id="22" component_id="122">
			<node label="Out (RX Yawn)" type="1">
				<position x="3" z="1"/>
			</node>
		</n>
		<n id="24" component_id="335">
			<node label="Out (RX Yawn base)" type="1">
				<position x="3"/>
			</node>
		</n>
		<n id="26" component_id="121">
			<node label="Out  (Listening Display)" type="6">
				<position x="1"/>
			</node>
		</n>
		<n id="27" component_id="334">
			<node label="Out (Telemetry Display)" type="6">
				<position x="1" z="1"/>
			</node>
		</n>
		<n id="28" component_id="333">
			<node label="Out (Contact)">
				<position x="1" z="2"/>
			</node>
		</n>
		<n id="29" component_id="151">
			<node label="In (Locator Ping)" mode="1">
				<position x="1" z="4"/>
			</node>
		</n>
		<n id="30" component_id="332">
			<node label="In (Switch Display)" mode="1">
				<position x="1" z="3"/>
			</node>
		</n>
	</nodes>
	<group>
		<data>
			<inputs/>
			<outputs/>
		</data>
		<components>
			<c type="37">
				<object id="124">
					<pos x="2.25" y="8.75"/>
					<in1 component_id="125"/>
					<in3 component_id="127"/>
					<r text="0"/>
					<i text="1" value="1"/>
					<min text="0"/>
					<max text="2205" value="2205"/>
				</object>
			</c>
			<c>
				<object id="125">
					<pos x="-0.5" y="9.25"/>
					<in1 component_id="151"/>
				</object>
			</c>
			<c type="48">
				<object id="126" m="0">
					<pos x="-0.5" y="8.75"/>
					<in1 component_id="151"/>
				</object>
			</c>
			<c type="27">
				<object id="127" on="0.1" off="0.1">
					<pos x="0.75" y="8.75"/>
					<in1 component_id="126"/>
				</object>
			</c>
			<c type="17">
				<object id="128">
					<pos x="6" y="9"/>
					<in1 component_id="124"/>
					<in2 component_id="129"/>
				</object>
			</c>
			<c type="15">
				<object id="129">
					<pos x="5" y="8.5"/>
					<n text="3600" value="3600"/>
				</object>
			</c>
			<c type="13">
				<object id="130">
					<pos x="3.75" y="8.5"/>
					<in1 component_id="151"/>
					<in3 component_id="124"/>
					<r text="0"/>
				</object>
			</c>
			<c type="45">
				<object id="131" e="max(0, ((x-1)/0.02)/1000)">
					<pos x="4.75" y="7.5"/>
					<in1 component_id="130"/>
				</object>
			</c>
			<c type="31">
				<object id="132">
					<pos x="-0.75" y="5"/>
					<in1 component_id="60"/>
				</object>
			</c>
			<c type="31">
				<object id="133" i="2">
					<pos x="-0.75" y="4.75"/>
					<in1 component_id="60"/>
				</object>
			</c>
			<c type="31">
				<object id="134">
					<pos x="-0.75" y="3.75"/>
					<in1 component_id="52"/>
				</object>
			</c>
			<c type="31">
				<object id="135" i="1">
					<pos x="-0.75" y="3.5"/>
					<in1 component_id="52"/>
				</object>
			</c>
			<c type="31">
				<object id="136" i="3">
					<pos x="-0.75" y="2.75"/>
					<in1 component_id="52"/>
				</object>
			</c>
			<c type="56">
				<object id="137" script="function onTick()
	tx1 = 0
	ty1 = 0
	tx2 = 0
	ty2 = 0
	error = false
	
	x0, y0, d0 = input.getNumber(1), input.getNumber(2), input.getNumber(3)*1000 
	x1, y1, d1 = input.getNumber(4), input.getNumber(5), input.getNumber(6)*1000 

	dx = x1 - x0
	dy = y1 - y0
	dist = math.sqrt(dx * dx + dy * dy)
	
	if dist &gt; d0 + d1 or dist &lt; math.abs(d0 - d1) then
		error = true
	else
		a = (d0^2 - d1^2 + dist^2) / (2 * dist)  
		px = x0 + a * dx / dist
		py = y0 + a * dy / dist

		h = math.sqrt(math.abs(d0^2 - a^2))  -- abs      

		rx = -dy / dist
		ry = dx / dist

		tx1 = px + h * rx
		ty1 = py + h * ry

		tx2 = px - h * rx
		ty2 = py - h * ry
	end	
	
	output.setBool(1, error) 
	output.setNumber(1, tx1)
	output.setNumber(2, ty1)
	output.setNumber(3, tx2)
	output.setNumber(4, ty2)
	
end">
					<pos x="3.25" y="5"/>
					<in1 component_id="138"/>
				</object>
			</c>
			<c type="40">
				<object id="138" count="6">
					<pos x="1.5" y="3.75"/>
					<in1 component_id="132"/>
					<in2 component_id="133"/>
					<in3 component_id="131"/>
					<in4 component_id="134"/>
					<in5 component_id="135"/>
					<in6 component_id="136"/>
				</object>
			</c>
			<c type="29">
				<object id="139">
					<pos x="4.75" y="5.25"/>
					<in1 component_id="137"/>
				</object>
			</c>
			<c type="31">
				<object id="140">
					<pos x="4.75" y="5"/>
					<in1 component_id="137"/>
				</object>
			</c>
			<c type="31">
				<object id="141" i="1">
					<pos x="4.75" y="4.75"/>
					<in1 component_id="137"/>
				</object>
			</c>
			<c type="31">
				<object id="142" i="2">
					<pos x="4.75" y="4.5"/>
					<in1 component_id="137"/>
				</object>
			</c>
			<c type="31">
				<object id="143" i="3">
					<pos x="4.75" y="4.25"/>
					<in1 component_id="137"/>
				</object>
			</c>
			<c type="44">
				<object id="144" l="Triangulation Fail" on="True" off="False">
					<pos x="6.5" y="5.25"/>
					<in1 component_id="139"/>
				</object>
			</c>
			<c type="43">
				<object id="145" l="Possible tX1">
					<pos x="6.5" y="4.75"/>
					<in1 component_id="140"/>
				</object>
			</c>
			<c type="43">
				<object id="146" l="Possible tY1">
					<pos x="6.5" y="4.5"/>
					<in1 component_id="141"/>
				</object>
			</c>
			<c type="43">
				<object id="147" l="Possible tX2">
					<pos x="6.5" y="4.25"/>
					<in1 component_id="142"/>
				</object>
			</c>
			<c type="43">
				<object id="148" l="Possible tY2">
					<pos x="6.5" y="4"/>
					<in1 component_id="143"/>
				</object>
			</c>
			<c type="43">
				<object id="149" l="Distance">
					<pos x="6.5" y="3.75"/>
					<in1 component_id="131"/>
				</object>
			</c>
			<c type="56">
				<object id="150" script='RXs = {}
Missions = {}
Timers = {}
echo = 72--00 --1-2 minutes
current_page = 0
array_view_i = 0


function arrayInit(array, d_start, d_end, basic_value)
	while #array == 0 do
		for i = d_start, d_end do
			array[i] = basic_value
		end
	end
end

function sortChannels()
	--    
	local ids = {}
	local count = 0

	for i = 1, #RXs do
		if RXs[i] ~= 0 then
			count = count + 1
			ids[count] = i
		end
	end

	for i = 2, count do
		local key = RXs[ids[i]]
		local temp = ids[i]
		local j = i - 1
		while j &gt; 0 and RXs[ids[j]] &gt; key do
			ids[j + 1] = ids[j]
			j = j - 1
		end
		ids[j + 1] = temp
	end
  
	local r, m, t = {}, {}, {}
	for i = 1, count do
		r[i] = RXs[ids[i]]
		m[i] = Missions[ids[i]]
		t[i] = Timers[ids[i]]
	end
	for i = count + 1, #RXs do
		r[i] = 0
		m[i] = 0
		t[i] = 0
	end

	RXs, Missions, Timers = r, m, t
end


function switchPage(plus, minus)
	if plus == true then
		current_page = current_page+1
	end
	if minus == true then
		current_page = current_page-1
	end

	if current_page &lt; 0 then
		current_page = 0
	end

	if current_page &lt; 1 and active_pages &gt; 0 then
		current_page = 1
	end

	if current_page &gt; active_pages then
		current_page = active_pages
	end
end


function onTick()
	local flag_new_lrm = true --radiochannel and mission number check for listening channel
	local flag_new_brm = true --radiochannel and mission number check for basic channel
	local flag_mission_found = false
	active_pages = 0
	
	display_switch    = input.getBool(1)
	local page_plus   = input.getBool(2)
	local page_minus  = input.getBool(3)
	local listen_mod  = input.getBool(4)
	rx_listen_num 	= input.getNumber(1)
	rx_basic_num  	= input.getNumber(2)
	local set_mission = input.getNumber(3)
	local rxl_mission = input.getNumber(4)
	local rxb_mission = input.getNumber(5)	
	blocked_channel   = input.getNumber(6)
	
	if listen_mod == true then
		rx_basic_num = rx_listen_num
		rxb_mission = rxl_mission
	end
	
	
	if rxl_mission == 0 then
		flag_new_lrm = false
	end
	
	if rxb_mission == 0 or rx_listen_num == rx_basic_num then
		flag_new_brm = false
	end
	
	arrayInit(RXs, 1, 999, 0)
	arrayInit(Missions, 1, 999, 0)
	arrayInit(Timers, 1, 999, 0)
	
	for i = 1, 999 do
		if Timers[i]==0 then 
			RXs[i] = 0
			Missions[i] = 0
			Timers[i] = 0
		else
			Timers[i] = Timers[i]-1
			active_pages = active_pages+1
		end
			
		if RXs[i] == rx_listen_num then
			flag_new_lrm = false
			if Timers[i]&gt;0 and rxl_mission ~= 0 then
				Timers[i] = echo
				Missions[i] = rxl_mission
			end
		end
		
			
		if RXs[i] == rx_basic_num then
			flag_new_brm = false
			if Timers[i]&gt;0 and rxb_mission ~= 0 then
				Timers[i] = echo
				Missions[i] = rxb_mission
			end
		end
			
			
		if Missions[i] == set_mission then
			flag_mission_found = true
		end
	end

	
	local i = 0
	while (flag_new_lrm == true or flag_new_brm == true) and i&lt;1000 do
		i = i+1
		if Timers[i] == 0 then
			active_pages = active_pages+1
			Timers[i] = echo
			if flag_new_lrm == true then
				RXs[i] = rx_listen_num
				Missions[i] = rxl_mission
				flag_new_lrm = false
			elseif flag_new_brm == true then
				RXs[i] = rx_basic_num
				Missions[i] = rxb_mission
				flag_new_brm = false
			end
		end
	end
		
	sortChannels()
	
	local search_i = 0
	if current_page &gt; 0 then
		for i = 1, 999 do
			if Timers[i] &gt; 0 then
				search_i = search_i+1
				if search_i==current_page then
					array_view_i = i
				end
			end
		end
	end
	
	
	switchPage(page_plus, page_minus)
	output.setBool(1, flag_mission_found)
	output.setNumber(1, rx_listen_num)
	output.setNumber(2, rx_basic_num)
	output.setNumber(3, set_mission)
	output.setNumber(4, rxl_mission)
	output.setNumber(5, rxb_mission)
	output.setNumber(6, blocked_channel)
	
end

function onDraw()
	if display_switch == true then
		screen.setColor(0, 5, 0)
		screen.drawClear()
		screen.setColor(60, 200, 0)
		--screen.drawText(1, 0, string.format("br-#%.0f", rx_basic_num))
		screen.drawText(1, 0, string.format("br-#%.0f+"..tostring(string.format("%.0f", blocked_channel)), rx_basic_num))
		screen.drawLine(0, 6, 96, 6)
		
		screen.drawText(1, 8, string.format("#%.0f/"..tostring(active_pages), current_page))
		if current_page &gt; 0 and array_view_i &gt; 0 then
			screen.drawText(1, 16, string.format("R%.0f.M"..tostring(string.format("%.0f", Missions[array_view_i])), RXs[array_view_i]))
		end
		
		screen.drawLine(0, 23, 96, 23)
		screen.drawText(1, 25, string.format("lr-#%.0f", rx_listen_num))
	end
end'>
					<pos x="9.75" y="-6.75"/>
					<in1 component_id="152"/>
				</object>
			</c>
			<c type="41">
				<object id="152" count="4">
					<pos x="8.5" y="-7.5"/>
					<inc component_id="153"/>
					<in1 component_id="332"/>
					<in2 component_id="291"/>
					<in3 component_id="293"/>
					<in4 component_id="172"/>
				</object>
			</c>
			<c type="40">
				<object id="153" count="6">
					<pos x="7.25" y="-8"/>
					<in1 component_id="326"/>
					<in2 component_id="95"/>
					<in3 component_id="336"/>
					<in4 component_id="324"/>
					<in5 component_id="323"/>
					<in6 component_id="94"/>
				</object>
			</c>
			<c type="13">
				<object id="155">
					<pos x="1" y="-7"/>
					<in1 component_id="311"/>
					<in3 component_id="157"/>
					<r text="0"/>
				</object>
			</c>
			<c type="45">
				<object id="156" e="x+1">
					<pos x="2.75" y="-6.5"/>
					<in1 component_id="155"/>
				</object>
			</c>
			<c type="22">
				<object id="157">
					<pos x="3.75" y="-7.5"/>
					<in1 component_id="156"/>
					<in2 component_id="50"/>
					<in3 component_id="159"/>
				</object>
			</c>
			<c type="17">
				<object id="158">
					<pos x="1.75" y="-7.75"/>
					<in1 component_id="155"/>
					<in2 component_id="163"/>
				</object>
			</c>
			<c type="1">
				<object id="159">
					<pos x="2.75" y="-8.25"/>
					<in1 component_id="158"/>
					<in2 component_id="160"/>
				</object>
			</c>
			<c type="18">
				<object id="160">
					<pos x="1.75" y="-9"/>
					<in1 component_id="155"/>
					<in2 component_id="93"/>
				</object>
			</c>
			<c type="45">
				<object id="163" e="x-1">
					<pos x="0.75" y="-8.25"/>
					<in1 component_id="50"/>
				</object>
			</c>
			<c type="31">
				<object id="166" i="31">
					<pos x="-1" y="-5"/>
					<in1 component_id="29"/>
				</object>
			</c>
			<c type="31">
				<object id="167" i="31">
					<pos x="-1" y="-4.5"/>
					<in1 component_id="7"/>
				</object>
			</c>
			<c type="29">
				<object id="169" i="-1">
					<pos x="10.75" y="-5.75"/>
					<in1 component_id="150"/>
					<in2 component_id="318"/>
				</object>
			</c>
			<c type="22">
				<object id="171">
					<pos x="1" y="-4.75"/>
					<in1 component_id="166"/>
					<in2 component_id="167"/>
					<in3 component_id="172"/>
				</object>
			</c>
			<c type="29">
				<object id="172" i="-1">
					<pos y="-3.25"/>
					<in1 component_id="9"/>
					<in2 component_id="173"/>
				</object>
			</c>
			<c type="19">
				<object id="173" name="Channel (Listening Mod)">
					<pos x="-1" y="-3.75"/>
					<min text="1" value="1"/>
					<max text="32" value="32"/>
					<int text="1" value="1"/>
					<v text="6" value="6"/>
				</object>
			</c>
			<c type="22">
				<object id="268">
					<pos x="4.5" y="-3"/>
					<in1 component_id="155"/>
					<in2 component_id="95"/>
					<in3 component_id="172"/>
				</object>
			</c>
			<c type="17">
				<object id="281">
					<pos y="-11"/>
					<in1 component_id="283"/>
					<in2 component_id="284"/>
				</object>
			</c>
			<c type="18">
				<object id="282">
					<pos y="-12.75"/>
					<in1 component_id="283"/>
					<in2 component_id="285"/>
				</object>
			</c>
			<c type="31">
				<object id="283" i="3">
					<pos x="-1.25" y="-11.75"/>
					<in1 component_id="92"/>
				</object>
			</c>
			<c type="19">
				<object id="284" name="Switch Sensitivity">
					<pos y="-11.5"/>
					<min text="0.1" value="0.1"/>
					<max text="1" value="1"/>
					<int text="0.1" value="0.1"/>
					<v text="0.5" value="0.5"/>
				</object>
			</c>
			<c type="45">
				<object id="285" e="-1*x">
					<pos y="-12"/>
					<in1 component_id="284"/>
				</object>
			</c>
			<c type="27">
				<object id="290" on="0.1" off="0.1">
					<pos x="6" y="-10.75"/>
					<in1 component_id="281"/>
				</object>
			</c>
			<c type="48">
				<object id="291">
					<pos x="7.25" y="-10.75"/>
					<in1 component_id="290"/>
				</object>
			</c>
			<c type="27">
				<object id="292" on="0.1" off="0.1">
					<pos x="6.25" y="-12.5"/>
					<in1 component_id="282"/>
				</object>
			</c>
			<c type="48">
				<object id="293">
					<pos x="7.5" y="-12.5"/>
					<in1 component_id="292"/>
				</object>
			</c>
			<c type="43">
				<object id="294" l="brm">
					<pos x="-9.75" y="-6.5"/>
					<in1 component_id="167"/>
				</object>
			</c>
			<c type="43">
				<object id="295" l="lrm">
					<pos x="-9.75" y="-7.25"/>
					<in1 component_id="166"/>
				</object>
			</c>
			<c type="27">
				<object id="310" on="0.1" off="0.1">
					<pos x="-1" y="-5.5"/>
					<in1 component_id="332"/>
				</object>
			</c>
			<c type="48">
				<object id="311">
					<pos y="-6"/>
					<in1 component_id="310"/>
				</object>
			</c>
			<c type="43">
				<object id="316" l="32 listen channel">
					<pos x="-4.75" y="-5"/>
					<in1 component_id="166"/>
				</object>
			</c>
			<c type="41">
				<object id="317" count="1">
					<pos x="12.25" y="-5.5"/>
					<in1 component_id="169"/>
				</object>
			</c>
			<c type="19">
				<object id="318" name="Status (Listen found)">
					<pos x="9.5" y="-5.75"/>
					<min text="1" value="1"/>
					<max text="32" value="32"/>
					<int text="1" value="1"/>
					<v text="7" value="7"/>
				</object>
			</c>
			<c type="43">
				<object id="321" l="ALG: rx_listen_num">
					<pos x="-7.25" y="-6.5"/>
					<in1 component_id="155"/>
				</object>
			</c>
			<c type="43">
				<object id="322" l="ALG: rxl_mission">
					<pos x="-7.25" y="-7.25"/>
					<in1 component_id="166"/>
				</object>
			</c>
			<c type="13">
				<object id="323">
					<pos x="3" y="-4.25"/>
					<in1 component_id="311"/>
					<in3 component_id="171"/>
					<r text="0"/>
				</object>
			</c>
			<c type="13">
				<object id="324">
					<pos x="2" y="-5"/>
					<in1 component_id="311"/>
					<in3 component_id="166"/>
					<r text="0"/>
				</object>
			</c>
			<c type="13">
				<object id="326">
					<pos x="6" y="-6.5"/>
					<in1 component_id="311"/>
					<in3 component_id="155"/>
					<r text="0"/>
				</object>
			</c>
			<c type="43">
				<object id="327" l="RX from target 32ch">
					<pos x="4.75" y="-4"/>
					<in1 component_id="323"/>
				</object>
			</c>
			<c type="43">
				<object id="337" l="rxl">
					<pos x="12" y="-7.75"/>
					<in1 component_id="343"/>
				</object>
			</c>
			<c type="43">
				<object id="338" l="rxb">
					<pos x="12" y="-8.5"/>
					<in1 component_id="344"/>
				</object>
			</c>
			<c type="43">
				<object id="339" l="mission">
					<pos x="12" y="-9.25"/>
					<in1 component_id="345"/>
				</object>
			</c>
			<c type="43">
				<object id="340" l="rxl_mission">
					<pos x="12" y="-10"/>
					<in1 component_id="346"/>
				</object>
			</c>
			<c type="43">
				<object id="341" l="rxb_mission">
					<pos x="12" y="-10.75"/>
					<in1 component_id="347"/>
				</object>
			</c>
			<c type="43">
				<object id="342" l="blocked channels">
					<pos x="12" y="-11.5"/>
					<in1 component_id="348"/>
				</object>
			</c>
			<c type="31">
				<object id="343">
					<pos x="10.75" y="-7.5"/>
					<in1 component_id="150"/>
				</object>
			</c>
			<c type="31">
				<object id="344" i="1">
					<pos x="10.75" y="-8.25"/>
					<in1 component_id="150"/>
				</object>
			</c>
			<c type="31">
				<object id="345" i="2">
					<pos x="10.75" y="-9"/>
					<in1 component_id="150"/>
				</object>
			</c>
			<c type="31">
				<object id="346" i="3">
					<pos x="10.75" y="-9.75"/>
					<in1 component_id="150"/>
				</object>
			</c>
			<c type="31">
				<object id="347" i="4">
					<pos x="10.75" y="-10.5"/>
					<in1 component_id="150"/>
				</object>
			</c>
			<c type="31">
				<object id="348" i="5">
					<pos x="10.75" y="-11.25"/>
					<in1 component_id="150"/>
				</object>
			</c>
		</components>
		<components_bridge>
			<c type="4">
				<object id="7">
					<pos x="-2.5" y="-4.5"/>
				</object>
			</c>
			<c type="5">
				<object id="8">
					<pos x="13.75" y="-5.25"/>
					<in1 component_id="317"/>
				</object>
			</c>
			<c type="4">
				<object id="9">
					<pos x="-2.5" y="-3"/>
				</object>
			</c>
			<c type="4">
				<object id="29">
					<pos x="-2.5" y="-5"/>
				</object>
			</c>
			<c type="2">
				<object id="50">
					<pos x="-2.5" y="-7"/>
				</object>
			</c>
			<c type="4">
				<object id="52">
					<pos x="-2.5" y="3.5"/>
				</object>
			</c>
			<c type="4">
				<object id="60">
					<pos x="-2.5" y="4.75"/>
				</object>
			</c>
			<c type="4">
				<object id="61">
					<pos x="-2.5" y="-0.25"/>
				</object>
			</c>
			<c type="3">
				<object id="76">
					<pos x="11.75" y="-0.75"/>
				</object>
			</c>
			<c type="3">
				<object id="77">
					<pos x="11.75" y="-0.5"/>
				</object>
			</c>
			<c type="4">
				<object id="92">
					<pos x="-2.5" y="-11.75"/>
				</object>
			</c>
			<c type="2">
				<object id="93">
					<pos x="-2.5" y="-7.5"/>
				</object>
			</c>
			<c type="2">
				<object id="94">
					<pos x="-2.5" y="-10.5"/>
				</object>
			</c>
			<c type="2">
				<object id="95">
					<pos x="-2.5" y="-6"/>
				</object>
			</c>
			<c type="3">
				<object id="106">
					<pos x="11.75" y="-4.5"/>
					<in1 component_id="155"/>
				</object>
			</c>
			<c type="3">
				<object id="107">
					<pos x="11.75" y="-2.5"/>
					<in1 component_id="268"/>
				</object>
			</c>
			<c type="7">
				<object id="121">
					<pos x="12" y="-6.75"/>
					<in1 component_id="150" node_index="1"/>
				</object>
			</c>
			<c type="3">
				<object id="122">
					<pos x="11.75" y="-1"/>
				</object>
			</c>
			<c>
				<object id="151">
					<pos x="-2.75" y="9"/>
				</object>
			</c>
			<c>
				<object id="332">
					<pos x="-2.5" y="-5.5"/>
				</object>
			</c>
			<c type="1">
				<object id="333">
					<pos x="11.75" y="1.75"/>
				</object>
			</c>
			<c type="7">
				<object id="334">
					<pos x="15.75" y="-5.25"/>
				</object>
			</c>
			<c type="3">
				<object id="335">
					<pos x="11.75" y="-1.25"/>
				</object>
			</c>
			<c type="2">
				<object id="336">
					<pos x="-2.5" y="-6.5"/>
				</object>
			</c>
		</components_bridge>
		<groups/>
		<component_states>
			<c0 id="124">
				<pos x="2.25" y="8.75"/>
				<in1 component_id="125"/>
				<in3 component_id="127"/>
				<r text="0"/>
				<i text="1" value="1"/>
				<min text="0"/>
				<max text="2205" value="2205"/>
			</c0>
			<c1 id="125">
				<pos x="-0.5" y="9.25"/>
				<in1 component_id="151"/>
			</c1>
			<c2 id="126" m="0">
				<pos x="-0.5" y="8.75"/>
				<in1 component_id="151"/>
			</c2>
			<c3 id="127" on="0.1" off="0.1">
				<pos x="0.75" y="8.75"/>
				<in1 component_id="126"/>
			</c3>
			<c4 id="128">
				<pos x="6" y="9"/>
				<in1 component_id="124"/>
				<in2 component_id="129"/>
			</c4>
			<c5 id="129">
				<pos x="5" y="8.5"/>
				<n text="3600" value="3600"/>
			</c5>
			<c6 id="130">
				<pos x="3.75" y="8.5"/>
				<in1 component_id="151"/>
				<in3 component_id="124"/>
				<r text="0"/>
			</c6>
			<c7 id="131" e="max(0, ((x-1)/0.02)/1000)">
				<pos x="4.75" y="7.5"/>
				<in1 component_id="130"/>
			</c7>
			<c8 id="132">
				<pos x="-0.75" y="5"/>
				<in1 component_id="60"/>
			</c8>
			<c9 id="133" i="2">
				<pos x="-0.75" y="4.75"/>
				<in1 component_id="60"/>
			</c9>
			<c10 id="134">
				<pos x="-0.75" y="3.75"/>
				<in1 component_id="52"/>
			</c10>
			<c11 id="135" i="1">
				<pos x="-0.75" y="3.5"/>
				<in1 component_id="52"/>
			</c11>
			<c12 id="136" i="3">
				<pos x="-0.75" y="2.75"/>
				<in1 component_id="52"/>
			</c12>
			<c13 id="137" script="function onTick()
	tx1 = 0
	ty1 = 0
	tx2 = 0
	ty2 = 0
	error = false
	
	x0, y0, d0 = input.getNumber(1), input.getNumber(2), input.getNumber(3)*1000 
	x1, y1, d1 = input.getNumber(4), input.getNumber(5), input.getNumber(6)*1000 

	dx = x1 - x0
	dy = y1 - y0
	dist = math.sqrt(dx * dx + dy * dy)
	
	if dist &gt; d0 + d1 or dist &lt; math.abs(d0 - d1) then
		error = true
	else
		a = (d0^2 - d1^2 + dist^2) / (2 * dist)  
		px = x0 + a * dx / dist
		py = y0 + a * dy / dist

		h = math.sqrt(math.abs(d0^2 - a^2))  -- abs      

		rx = -dy / dist
		ry = dx / dist

		tx1 = px + h * rx
		ty1 = py + h * ry

		tx2 = px - h * rx
		ty2 = py - h * ry
	end	
	
	output.setBool(1, error) 
	output.setNumber(1, tx1)
	output.setNumber(2, ty1)
	output.setNumber(3, tx2)
	output.setNumber(4, ty2)
	
end">
				<pos x="3.25" y="5"/>
				<in1 component_id="138"/>
			</c13>
			<c14 id="138" count="6">
				<pos x="1.5" y="3.75"/>
				<in1 component_id="132"/>
				<in2 component_id="133"/>
				<in3 component_id="131"/>
				<in4 component_id="134"/>
				<in5 component_id="135"/>
				<in6 component_id="136"/>
			</c14>
			<c15 id="139">
				<pos x="4.75" y="5.25"/>
				<in1 component_id="137"/>
			</c15>
			<c16 id="140">
				<pos x="4.75" y="5"/>
				<in1 component_id="137"/>
			</c16>
			<c17 id="141" i="1">
				<pos x="4.75" y="4.75"/>
				<in1 component_id="137"/>
			</c17>
			<c18 id="142" i="2">
				<pos x="4.75" y="4.5"/>
				<in1 component_id="137"/>
			</c18>
			<c19 id="143" i="3">
				<pos x="4.75" y="4.25"/>
				<in1 component_id="137"/>
			</c19>
			<c20 id="144" l="Triangulation Fail" on="True" off="False">
				<pos x="6.5" y="5.25"/>
				<in1 component_id="139"/>
			</c20>
			<c21 id="145" l="Possible tX1">
				<pos x="6.5" y="4.75"/>
				<in1 component_id="140"/>
			</c21>
			<c22 id="146" l="Possible tY1">
				<pos x="6.5" y="4.5"/>
				<in1 component_id="141"/>
			</c22>
			<c23 id="147" l="Possible tX2">
				<pos x="6.5" y="4.25"/>
				<in1 component_id="142"/>
			</c23>
			<c24 id="148" l="Possible tY2">
				<pos x="6.5" y="4"/>
				<in1 component_id="143"/>
			</c24>
			<c25 id="149" l="Distance">
				<pos x="6.5" y="3.75"/>
				<in1 component_id="131"/>
			</c25>
			<c26 id="150" script='RXs = {}
Missions = {}
Timers = {}
echo = 72--00 --1-2 minutes
current_page = 0
array_view_i = 0


function arrayInit(array, d_start, d_end, basic_value)
	while #array == 0 do
		for i = d_start, d_end do
			array[i] = basic_value
		end
	end
end

function sortChannels()
	--    
	local ids = {}
	local count = 0

	for i = 1, #RXs do
		if RXs[i] ~= 0 then
			count = count + 1
			ids[count] = i
		end
	end

	for i = 2, count do
		local key = RXs[ids[i]]
		local temp = ids[i]
		local j = i - 1
		while j &gt; 0 and RXs[ids[j]] &gt; key do
			ids[j + 1] = ids[j]
			j = j - 1
		end
		ids[j + 1] = temp
	end
  
	local r, m, t = {}, {}, {}
	for i = 1, count do
		r[i] = RXs[ids[i]]
		m[i] = Missions[ids[i]]
		t[i] = Timers[ids[i]]
	end
	for i = count + 1, #RXs do
		r[i] = 0
		m[i] = 0
		t[i] = 0
	end

	RXs, Missions, Timers = r, m, t
end


function switchPage(plus, minus)
	if plus == true then
		current_page = current_page+1
	end
	if minus == true then
		current_page = current_page-1
	end

	if current_page &lt; 0 then
		current_page = 0
	end

	if current_page &lt; 1 and active_pages &gt; 0 then
		current_page = 1
	end

	if current_page &gt; active_pages then
		current_page = active_pages
	end
end


function onTick()
	local flag_new_lrm = true --radiochannel and mission number check for listening channel
	local flag_new_brm = true --radiochannel and mission number check for basic channel
	local flag_mission_found = false
	active_pages = 0
	
	display_switch    = input.getBool(1)
	local page_plus   = input.getBool(2)
	local page_minus  = input.getBool(3)
	local listen_mod  = input.getBool(4)
	rx_listen_num 	= input.getNumber(1)
	rx_basic_num  	= input.getNumber(2)
	local set_mission = input.getNumber(3)
	local rxl_mission = input.getNumber(4)
	local rxb_mission = input.getNumber(5)	
	blocked_channel   = input.getNumber(6)
	
	if listen_mod == true then
		rx_basic_num = rx_listen_num
		rxb_mission = rxl_mission
	end
	
	
	if rxl_mission == 0 then
		flag_new_lrm = false
	end
	
	if rxb_mission == 0 or rx_listen_num == rx_basic_num then
		flag_new_brm = false
	end
	
	arrayInit(RXs, 1, 999, 0)
	arrayInit(Missions, 1, 999, 0)
	arrayInit(Timers, 1, 999, 0)
	
	for i = 1, 999 do
		if Timers[i]==0 then 
			RXs[i] = 0
			Missions[i] = 0
			Timers[i] = 0
		else
			Timers[i] = Timers[i]-1
			active_pages = active_pages+1
		end
			
		if RXs[i] == rx_listen_num then
			flag_new_lrm = false
			if Timers[i]&gt;0 and rxl_mission ~= 0 then
				Timers[i] = echo
				Missions[i] = rxl_mission
			end
		end
		
			
		if RXs[i] == rx_basic_num then
			flag_new_brm = false
			if Timers[i]&gt;0 and rxb_mission ~= 0 then
				Timers[i] = echo
				Missions[i] = rxb_mission
			end
		end
			
			
		if Missions[i] == set_mission then
			flag_mission_found = true
		end
	end

	
	local i = 0
	while (flag_new_lrm == true or flag_new_brm == true) and i&lt;1000 do
		i = i+1
		if Timers[i] == 0 then
			active_pages = active_pages+1
			Timers[i] = echo
			if flag_new_lrm == true then
				RXs[i] = rx_listen_num
				Missions[i] = rxl_mission
				flag_new_lrm = false
			elseif flag_new_brm == true then
				RXs[i] = rx_basic_num
				Missions[i] = rxb_mission
				flag_new_brm = false
			end
		end
	end
		
	sortChannels()
	
	local search_i = 0
	if current_page &gt; 0 then
		for i = 1, 999 do
			if Timers[i] &gt; 0 then
				search_i = search_i+1
				if search_i==current_page then
					array_view_i = i
				end
			end
		end
	end
	
	
	switchPage(page_plus, page_minus)
	output.setBool(1, flag_mission_found)
	output.setNumber(1, rx_listen_num)
	output.setNumber(2, rx_basic_num)
	output.setNumber(3, set_mission)
	output.setNumber(4, rxl_mission)
	output.setNumber(5, rxb_mission)
	output.setNumber(6, blocked_channel)
	
end

function onDraw()
	if display_switch == true then
		screen.setColor(0, 5, 0)
		screen.drawClear()
		screen.setColor(60, 200, 0)
		--screen.drawText(1, 0, string.format("br-#%.0f", rx_basic_num))
		screen.drawText(1, 0, string.format("br-#%.0f+"..tostring(string.format("%.0f", blocked_channel)), rx_basic_num))
		screen.drawLine(0, 6, 96, 6)
		
		screen.drawText(1, 8, string.format("#%.0f/"..tostring(active_pages), current_page))
		if current_page &gt; 0 and array_view_i &gt; 0 then
			screen.drawText(1, 16, string.format("R%.0f.M"..tostring(string.format("%.0f", Missions[array_view_i])), RXs[array_view_i]))
		end
		
		screen.drawLine(0, 23, 96, 23)
		screen.drawText(1, 25, string.format("lr-#%.0f", rx_listen_num))
	end
end'>
				<pos x="9.75" y="-6.75"/>
				<in1 component_id="152"/>
			</c26>
			<c27 id="152" count="4">
				<pos x="8.5" y="-7.5"/>
				<inc component_id="153"/>
				<in1 component_id="332"/>
				<in2 component_id="291"/>
				<in3 component_id="293"/>
				<in4 component_id="172"/>
			</c27>
			<c28 id="153" count="6">
				<pos x="7.25" y="-8"/>
				<in1 component_id="326"/>
				<in2 component_id="95"/>
				<in3 component_id="336"/>
				<in4 component_id="324"/>
				<in5 component_id="323"/>
				<in6 component_id="94"/>
			</c28>
			<c29 id="155">
				<pos x="1" y="-7"/>
				<in1 component_id="311"/>
				<in3 component_id="157"/>
				<r text="0"/>
			</c29>
			<c30 id="156" e="x+1">
				<pos x="2.75" y="-6.5"/>
				<in1 component_id="155"/>
			</c30>
			<c31 id="157">
				<pos x="3.75" y="-7.5"/>
				<in1 component_id="156"/>
				<in2 component_id="50"/>
				<in3 component_id="159"/>
			</c31>
			<c32 id="158">
				<pos x="1.75" y="-7.75"/>
				<in1 component_id="155"/>
				<in2 component_id="163"/>
			</c32>
			<c33 id="159">
				<pos x="2.75" y="-8.25"/>
				<in1 component_id="158"/>
				<in2 component_id="160"/>
			</c33>
			<c34 id="160">
				<pos x="1.75" y="-9"/>
				<in1 component_id="155"/>
				<in2 component_id="93"/>
			</c34>
			<c35 id="163" e="x-1">
				<pos x="0.75" y="-8.25"/>
				<in1 component_id="50"/>
			</c35>
			<c36 id="166" i="31">
				<pos x="-1" y="-5"/>
				<in1 component_id="29"/>
			</c36>
			<c37 id="167" i="31">
				<pos x="-1" y="-4.5"/>
				<in1 component_id="7"/>
			</c37>
			<c38 id="169" i="-1">
				<pos x="10.75" y="-5.75"/>
				<in1 component_id="150"/>
				<in2 component_id="318"/>
			</c38>
			<c39 id="171">
				<pos x="1" y="-4.75"/>
				<in1 component_id="166"/>
				<in2 component_id="167"/>
				<in3 component_id="172"/>
			</c39>
			<c40 id="172" i="-1">
				<pos y="-3.25"/>
				<in1 component_id="9"/>
				<in2 component_id="173"/>
			</c40>
			<c41 id="173" name="Channel (Listening Mod)">
				<pos x="-1" y="-3.75"/>
				<min text="1" value="1"/>
				<max text="32" value="32"/>
				<int text="1" value="1"/>
				<v text="6" value="6"/>
			</c41>
			<c42 id="268">
				<pos x="4.5" y="-3"/>
				<in1 component_id="155"/>
				<in2 component_id="95"/>
				<in3 component_id="172"/>
			</c42>
			<c43 id="281">
				<pos y="-11"/>
				<in1 component_id="283"/>
				<in2 component_id="284"/>
			</c43>
			<c44 id="282">
				<pos y="-12.75"/>
				<in1 component_id="283"/>
				<in2 component_id="285"/>
			</c44>
			<c45 id="283" i="3">
				<pos x="-1.25" y="-11.75"/>
				<in1 component_id="92"/>
			</c45>
			<c46 id="284" name="Switch Sensitivity">
				<pos y="-11.5"/>
				<min text="0.1" value="0.1"/>
				<max text="1" value="1"/>
				<int text="0.1" value="0.1"/>
				<v text="0.5" value="0.5"/>
			</c46>
			<c47 id="285" e="-1*x">
				<pos y="-12"/>
				<in1 component_id="284"/>
			</c47>
			<c48 id="290" on="0.1" off="0.1">
				<pos x="6" y="-10.75"/>
				<in1 component_id="281"/>
			</c48>
			<c49 id="291">
				<pos x="7.25" y="-10.75"/>
				<in1 component_id="290"/>
			</c49>
			<c50 id="292" on="0.1" off="0.1">
				<pos x="6.25" y="-12.5"/>
				<in1 component_id="282"/>
			</c50>
			<c51 id="293">
				<pos x="7.5" y="-12.5"/>
				<in1 component_id="292"/>
			</c51>
			<c52 id="294" l="brm">
				<pos x="-9.75" y="-6.5"/>
				<in1 component_id="167"/>
			</c52>
			<c53 id="295" l="lrm">
				<pos x="-9.75" y="-7.25"/>
				<in1 component_id="166"/>
			</c53>
			<c54 id="310" on="0.1" off="0.1">
				<pos x="-1" y="-5.5"/>
				<in1 component_id="332"/>
			</c54>
			<c55 id="311">
				<pos y="-6"/>
				<in1 component_id="310"/>
			</c55>
			<c56 id="316" l="32 listen channel">
				<pos x="-4.75" y="-5"/>
				<in1 component_id="166"/>
			</c56>
			<c57 id="317" count="1">
				<pos x="12.25" y="-5.5"/>
				<in1 component_id="169"/>
			</c57>
			<c58 id="318" name="Status (Listen found)">
				<pos x="9.5" y="-5.75"/>
				<min text="1" value="1"/>
				<max text="32" value="32"/>
				<int text="1" value="1"/>
				<v text="7" value="7"/>
			</c58>
			<c59 id="321" l="ALG: rx_listen_num">
				<pos x="-7.25" y="-6.5"/>
				<in1 component_id="155"/>
			</c59>
			<c60 id="322" l="ALG: rxl_mission">
				<pos x="-7.25" y="-7.25"/>
				<in1 component_id="166"/>
			</c60>
			<c61 id="323">
				<pos x="3" y="-4.25"/>
				<in1 component_id="311"/>
				<in3 component_id="171"/>
				<r text="0"/>
			</c61>
			<c62 id="324">
				<pos x="2" y="-5"/>
				<in1 component_id="311"/>
				<in3 component_id="166"/>
				<r text="0"/>
			</c62>
			<c63 id="326">
				<pos x="6" y="-6.5"/>
				<in1 component_id="311"/>
				<in3 component_id="155"/>
				<r text="0"/>
			</c63>
			<c64 id="327" l="RX from target 32ch">
				<pos x="4.75" y="-4"/>
				<in1 component_id="323"/>
			</c64>
			<c65 id="337" l="rxl">
				<pos x="12" y="-7.75"/>
				<in1 component_id="343"/>
			</c65>
			<c66 id="338" l="rxb">
				<pos x="12" y="-8.5"/>
				<in1 component_id="344"/>
			</c66>
			<c67 id="339" l="mission">
				<pos x="12" y="-9.25"/>
				<in1 component_id="345"/>
			</c67>
			<c68 id="340" l="rxl_mission">
				<pos x="12" y="-10"/>
				<in1 component_id="346"/>
			</c68>
			<c69 id="341" l="rxb_mission">
				<pos x="12" y="-10.75"/>
				<in1 component_id="347"/>
			</c69>
			<c70 id="342" l="blocked channels">
				<pos x="12" y="-11.5"/>
				<in1 component_id="348"/>
			</c70>
			<c71 id="343">
				<pos x="10.75" y="-7.5"/>
				<in1 component_id="150"/>
			</c71>
			<c72 id="344" i="1">
				<pos x="10.75" y="-8.25"/>
				<in1 component_id="150"/>
			</c72>
			<c73 id="345" i="2">
				<pos x="10.75" y="-9"/>
				<in1 component_id="150"/>
			</c73>
			<c74 id="346" i="3">
				<pos x="10.75" y="-9.75"/>
				<in1 component_id="150"/>
			</c74>
			<c75 id="347" i="4">
				<pos x="10.75" y="-10.5"/>
				<in1 component_id="150"/>
			</c75>
			<c76 id="348" i="5">
				<pos x="10.75" y="-11.25"/>
				<in1 component_id="150"/>
			</c76>
		</component_states>
		<component_bridge_states>
			<c0 id="7">
				<pos x="-2.5" y="-4.5"/>
			</c0>
			<c1 id="8">
				<pos x="13.75" y="-5.25"/>
				<in1 component_id="317"/>
			</c1>
			<c2 id="9">
				<pos x="-2.5" y="-3"/>
			</c2>
			<c3 id="29">
				<pos x="-2.5" y="-5"/>
			</c3>
			<c4 id="50">
				<pos x="-2.5" y="-7"/>
			</c4>
			<c5 id="52">
				<pos x="-2.5" y="3.5"/>
			</c5>
			<c6 id="60">
				<pos x="-2.5" y="4.75"/>
			</c6>
			<c7 id="61">
				<pos x="-2.5" y="-0.25"/>
			</c7>
			<c8 id="76">
				<pos x="11.75" y="-0.75"/>
			</c8>
			<c9 id="77">
				<pos x="11.75" y="-0.5"/>
			</c9>
			<c10 id="92">
				<pos x="-2.5" y="-11.75"/>
			</c10>
			<c11 id="93">
				<pos x="-2.5" y="-7.5"/>
			</c11>
			<c12 id="94">
				<pos x="-2.5" y="-10.5"/>
			</c12>
			<c13 id="95">
				<pos x="-2.5" y="-6"/>
			</c13>
			<c14 id="106">
				<pos x="11.75" y="-4.5"/>
				<in1 component_id="155"/>
			</c14>
			<c15 id="107">
				<pos x="11.75" y="-2.5"/>
				<in1 component_id="268"/>
			</c15>
			<c16 id="121">
				<pos x="12" y="-6.75"/>
				<in1 component_id="150" node_index="1"/>
			</c16>
			<c17 id="122">
				<pos x="11.75" y="-1"/>
			</c17>
			<c18 id="151">
				<pos x="-2.75" y="9"/>
			</c18>
			<c19 id="332">
				<pos x="-2.5" y="-5.5"/>
			</c19>
			<c20 id="333">
				<pos x="11.75" y="1.75"/>
			</c20>
			<c21 id="334">
				<pos x="15.75" y="-5.25"/>
			</c21>
			<c22 id="335">
				<pos x="11.75" y="-1.25"/>
			</c22>
			<c23 id="336">
				<pos x="-2.5" y="-6.5"/>
			</c23>
		</component_bridge_states>
		<group_states/>
	</group>
</microprocessor>

